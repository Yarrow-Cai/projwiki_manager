# ProjWiki 用户使用手册

## 概述

**ProjWiki** 是专为嵌入式项目设计的技术文档管理工具。它帮助您以 Markdown 格式编写文档，并自动生成美观、可交互的 HTML 站点。

## 快速开始

### 1. 初始化项目

如果您的项目还没有使用 ProjWiki，请执行以下步骤进行初始化：

1. **创建目录结构**：确保项目根目录下有 `.zed/` 文件夹。
2. **运行初始化指令**：
   - 使用指令：`ProjWiki: Init` 或 `初始化文档`
   - 系统将自动扫描项目中的所有源代码（`.c/.h`），并为每个模块生成初始的文档草稿。
3. **查看结果**：打开 `.zed/.projwiki/_site/index.html` 查看初始文档。

---

## 专项指令指南

ProjWiki 支持以下专项指令，您可以直接对 AI 助手输入这些指令来执行特定任务。

### 🛠️ 核心指令

| 指令名称 | 中文指令 | 作用 | 适用场景 |
| :--- | :--- | :--- | :--- |
| **Init** | `初始化` / `全量扫描` | 扫描整个项目，为缺失文档的模块生成草稿 | 首次使用或添加大量新模块后 |
| **Check** | `检查更新` / `分析文档` | 分析源码与文档的修改时间，列出过期的文档 | 需要更新文档但不知道改了哪里时 |
| **Update** | `更新文档` | 更新指定模块的文档内容 | 修改代码后同步更新文档 |
| **Build** | `刷新` / `生成HTML` | 重新生成 HTML 查看器 | 文档内容修改后，或查看器显示异常时 |
| **Help** | `帮助` | 显示本手册 | 忘记指令或流程时 |

---

## 工作流详解

### 流程一：智能更新 (Smart Update)

当您修改了代码，但不确定哪些文档需要更新时：

1. 输入指令：`检查更新` 或 `ProjWiki: Check`。
2. 系统会运行分析工具，对比源码和文档的修改时间。
3. 系统会输出一个表格，列出所有 **[OUTDATED]**（已过期）的文档。
4. 您可以根据表格，指定要更新的模块（例如：“请更新 bsp_timer 和 mdw_sched 的文档”）。
5. AI 助手会读取最新代码，更新文档内容。
6. 最后自动刷新 HTML 查看器。

### 流程二：手动创建/更新

1. 明确告诉 AI 助手：“创建 xxx 模块的文档” 或 “更新 xxx 接口文档”。
2. 提供相关代码或设计思路（如果是自动生成，AI 会自动读取代码）。
3. AI 助手生成/修改 Markdown 文件。
4. 自动刷新 HTML 查看器。

### 流程三：查看文档

1. 文档生成后，请在浏览器中打开：
   `项目根目录/.zed/.projwiki/_site/index.html`
2. 使用左侧导航栏浏览不同模块，或使用顶部搜索框查找内容。

---

## 常见问题 (FAQ)

**Q: 为什么我看不到最新的文档内容？**
A: 请确保执行了 `刷新` 指令（或 AI 自动执行了构建脚本），并且在浏览器中按 `F5` 刷新了页面。

**Q: 文档中必须使用中文吗？**
A: 是的。根据项目规范，所有生成的文档内容必须使用中文编写。

**Q: 如何手动修改文档？**
A: 您可以直接编辑 `.zed/.projwiki/` 下的 `.md` 文件，然后运行 `python .claude/skills/projwiki_manager/scripts/build_wiki.py` 更新 HTML。

**Q: `Init` 指令会覆盖我已有的文档吗？**
A: 不会。初始化脚本只会为 **缺失** 文档的模块生成新文件，已存在的文档会被跳过。

---

## 目录结构说明

```
.zed/.projwiki/
├── modules/          # 模块文档（按功能模块分类）
├── api/              # API 接口文档
├── design/           # 系统设计文档
├── hardware/         # 硬件接口文档
├── changelog/        # 变更日志
└── _site/            # [自动生成] HTML 站点文件，请勿手动修改
```
